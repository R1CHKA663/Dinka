# üéØ –†–ï–§–ï–†–ê–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê - –ü–û–õ–ù–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ü–†–û–í–ï–†–ö–ï

## ‚úÖ –ß–¢–û –ë–´–õ–û –ò–°–ü–†–ê–í–õ–ï–ù–û:

**–ü—Ä–æ–±–ª–µ–º–∞:** Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–ª `ref_code` –∫–∞–∫ query –ø–∞—Ä–∞–º–µ—Ç—Ä (`?ref_code=xxx`), –∞ backend –æ–∂–∏–¥–∞–ª JSON body.

**–†–µ—à–µ–Ω–∏–µ (—Å—Ç—Ä–æ–∫–∞ 533 –≤ App.js):**
```javascript
// –ë–´–õ–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
const res = await api.post(`/auth/demo?username=${username}&ref_code=${refCode}`);

// –°–¢–ê–õ–û (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
const res = await api.post('/auth/demo', {
  username: username,
  ref_code: refCode
});
```

---

## üìã –ö–ê–ö –ü–†–û–í–ï–†–ò–¢–¨ –ù–ê –°–ê–ô–¢–ï:

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ —Å–∞–π—Ç –∏ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞" –∏–ª–∏ "–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞"
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à—É —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
   - –§–æ—Ä–º–∞—Ç: `https://your-site.com/?ref=XXXXXX`

### –®–∞–≥ 2: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤–æ–µ **–ø—Ä–∏–≤–∞—Ç–Ω–æ–µ –æ–∫–Ω–æ** –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+Shift+N)
2. –í—Å—Ç–∞–≤—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Å—ã–ª–∫—É —Å `?ref=XXXXXX`
3. –ù–∞–∂–º–∏—Ç–µ "–î–µ–º–æ –≤—Ö–æ–¥" –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å —á–µ—Ä–µ–∑ Telegram
4. –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ —Ä–µ—Ñ–µ—Ä–∞–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–≤—è–∂–µ—Ç—Å—è

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–≤—è–∑–∫—É

1. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –æ—Å–Ω–æ–≤–Ω–æ–µ –æ–∫–Ω–æ (–≥–¥–µ –≤–∞—à –∞–∫–∫–∞—É–Ω—Ç)
2. –û—Ç–∫—Ä–æ–π—Ç–µ "–ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞"
3. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤"
4. **–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:**
   - –ò–º—è —Ä–µ—Ñ–µ—Ä–∞–ª–∞
   - –î–∞—Ç—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
   - –°—É–º–º—É –¥–µ–ø–æ–∑–∏—Ç–æ–≤ (0.00‚ÇΩ)
   - –°—Ç–∞—Ç—É—Å "‚è≥ –ë–µ–∑ –¥–µ–ø–æ–∑–∏—Ç–∞"

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–∞

1. –í –ø—Ä–∏–≤–∞—Ç–Ω–æ–º –æ–∫–Ω–µ (–≥–¥–µ —Ä–µ—Ñ–µ—Ä–∞–ª) —Å–¥–µ–ª–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –¥–µ–ø–æ–∑–∏—Ç
2. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –æ—Å–Ω–æ–≤–Ω–æ–µ –æ–∫–Ω–æ
3. –û–±–Ω–æ–≤–∏—Ç–µ —Å–ø–∏—Å–æ–∫ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
4. **–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:**
   - –°—É–º–º–∞ –¥–µ–ø–æ–∑–∏—Ç–æ–≤ –æ–±–Ω–æ–≤–∏–ª–∞—Å—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1000‚ÇΩ)
   - –°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏–ª—Å—è –Ω–∞ "‚úì –ê–∫—Ç–∏–≤–Ω—ã–π"
   - –í–∞—à –±–∞–ª–∞–Ω—Å —É–≤–µ–ª–∏—á–∏–ª—Å—è –Ω–∞ 10%-40% (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —É—Ä–æ–≤–Ω—è)

---

## üîç –ü–†–û–í–ï–†–ö–ê –í –ö–û–ù–°–û–õ–ò –ë–†–ê–£–ó–ï–†–ê:

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è ref_code:

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç —Å `?ref=XXXXX`
2. –ù–∞–∂–º–∏—Ç–µ F12 (–æ—Ç–∫—Ä—ã—Ç—å DevTools)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Console
4. –í–≤–µ–¥–∏—Ç–µ:
```javascript
localStorage.getItem('ref_code')
```
5. –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: `"XXXXX"`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:

1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network
2. –§–∏–ª—å—Ç—Ä: Fetch/XHR
3. –ù–∞–∂–º–∏—Ç–µ "–î–µ–º–æ –≤—Ö–æ–¥"
4. –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å `POST /auth/demo`
5. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ Payload:
```json
{
  "username": "player_abc123",
  "ref_code": "XXXXX"
}
```

---

## üóÑÔ∏è –ü–†–û–í–ï–†–ö–ê –í –ë–ê–ó–ï –î–ê–ù–ù–´–•:

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ MongoDB:

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–≤—è–∑–∫—É —Ä–µ—Ñ–µ—Ä–∞–ª–∞:**
```javascript
db.users.findOne(
  {username: "–∏–º—è_—Ä–µ—Ñ–µ—Ä–∞–ª–∞"}, 
  {invited_by: 1, _id: 0}
)
// –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: { invited_by: "XXXXX" }
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ä–µ—Ñ–µ—Ä–µ—Ä–∞:**
```javascript
db.users.findOne(
  {ref_link: "XXXXX"}, 
  {referalov: 1, deposited_refs: 1, income: 1, _id: 0}
)
// –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: 
// { referalov: 1, deposited_refs: 0, income: 0 }
// –ü–æ—Å–ª–µ –¥–µ–ø–æ–∑–∏—Ç–∞: { referalov: 1, deposited_refs: 1, income: 100 }
```

---

## üìä –£–†–û–í–ù–ò –†–ï–§–ï–†–ê–õ–¨–ù–û–ô –ü–†–û–ì–†–ê–ú–ú–´:

| –£—Ä–æ–≤–µ–Ω—å   | –†–µ—Ñ–µ—Ä–∞–ª–æ–≤ —Å –¥–µ–ø–æ–∑–∏—Ç–æ–º | –ü—Ä–æ—Ü–µ–Ω—Ç –±–æ–Ω—É—Å–∞ |
|-----------|----------------------|----------------|
| –ù–æ–≤–∏—á–æ–∫   | 0-4                  | 10%            |
| –ü–∞—Ä—Ç–Ω—ë—Ä   | 5-14                 | 20%            |
| –ú–∞—Å—Ç–µ—Ä    | 15-49                | 30%            |
| –õ–µ–≥–µ–Ω–¥–∞   | 50+                  | 40%            |

**–ü—Ä–∏–º–µ—Ä:**
- –†–µ—Ñ–µ—Ä–∞–ª —Å–¥–µ–ª–∞–ª –¥–µ–ø–æ–∑–∏—Ç 1000‚ÇΩ
- –í–∞—à —É—Ä–æ–≤–µ–Ω—å: –ù–æ–≤–∏—á–æ–∫ (10%)
- –í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ: 100‚ÇΩ –Ω–∞ –±–∞–ª–∞–Ω—Å

---

## ‚ùó –ß–ê–°–¢–´–ï –ü–†–û–ë–õ–ï–ú–´ –ò –†–ï–®–ï–ù–ò–Ø:

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –†–µ—Ñ–µ—Ä–∞–ª –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è ref_code

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `localStorage.getItem('ref_code')`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ—Ö–æ–¥–∏–ª–∏ –ø–æ —Å—Å—ã–ª–∫–µ —Å `?ref=XXX`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–µ –æ—á–∏—â–∞–ª–∏ cookies/localStorage

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ë–æ–Ω—É—Å –Ω–µ –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** –†–µ—Ñ–µ—Ä–∞–ª –Ω–µ —Å–¥–µ–ª–∞–ª –¥–µ–ø–æ–∑–∏—Ç –∏–ª–∏ –¥–µ–ø–æ–∑–∏—Ç –Ω–µ –∑–∞–≤–µ—Ä—à—ë–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –ë–æ–Ω—É—Å –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ **–∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–≥–æ** –¥–µ–ø–æ–∑–∏—Ç–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –¥–µ–ø–æ–∑–∏—Ç–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å "completed")
3. –í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `deposited_refs`

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç

**–ü—Ä–∏—á–∏–Ω–∞:** –í–∞—à —É—Ä–æ–≤–µ–Ω—å –∏–∑–º–µ–Ω–∏–ª—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –≤ "–ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ"
2. –£—Ä–æ–≤–µ–Ω—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ **—Å –¥–µ–ø–æ–∑–∏—Ç–∞–º–∏**
3. –ü—Ä–æ—Ü–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–∞

---

## üß™ –¢–ï–°–¢–û–í–´–ô –°–¶–ï–ù–ê–†–ò–ô (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤):

```bash
# 1. –°–æ–∑–¥–∞—Ç—å —Ä–µ—Ñ–µ—Ä–µ—Ä–∞
curl -X POST http://localhost:8001/api/auth/demo \
  -H "Content-Type: application/json" \
  -d '{"username":"test_referrer"}'
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ref_link –∏–∑ –æ—Ç–≤–µ—Ç–∞

# 2. –°–æ–∑–¥–∞—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª–∞
curl -X POST http://localhost:8001/api/auth/demo \
  -H "Content-Type: application/json" \
  -d '{"username":"test_client","ref_code":"–°–û–•–†–ê–ù–ï–ù–ù–´–ô_REF_LINK"}'

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–≤—è–∑–∫—É
curl -X GET http://localhost:8001/api/ref/list \
  -H "Authorization: Bearer –†–ï–§–ï–†–ï–†_TOKEN"

# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å —Å–ø–∏—Å–æ–∫ —Å –æ–¥–Ω–∏–º —Ä–µ—Ñ–µ—Ä–∞–ª–æ–º
```

---

## ‚úÖ –ö–û–ù–¢–†–û–õ–¨–ù–´–ô –ß–ï–ö–õ–ò–°–¢:

- [ ] –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è
- [ ] –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ —Å—Å—ã–ª–∫–µ `ref_code` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- [ ] –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ `ref_code` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ backend
- [ ] –í –ë–î `invited_by` = `ref_link` —Ä–µ—Ñ–µ—Ä–µ—Ä–∞
- [ ] –°—á—ë—Ç—á–∏–∫ `referalov` —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è
- [ ] –†–µ—Ñ–µ—Ä–∞–ª –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ
- [ ] –ü—Ä–∏ –¥–µ–ø–æ–∑–∏—Ç–µ `deposited_refs` —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è
- [ ] –ë–æ–Ω—É—Å –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è —Ä–µ—Ñ–µ—Ä—É
- [ ] `has_deposited` –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `true`
- [ ] –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "‚úì –ê–∫—Ç–∏–≤–Ω—ã–π"

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–°–Å –†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è frontend (–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã) —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é!
